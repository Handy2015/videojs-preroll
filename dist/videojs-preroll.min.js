/*! videojs-preroll - v0.1.0 - 2014-07-30
* Copyright (c) 2014 Sano Webdevelopment;
* Copyright (c) 2014 The Onion
* Licensed MIT */
!function(a,b){"use strict";var c,d={src:"",href:"",target:"_blank",allowSkip:!0,skipTime:5};c=function(c){var e=b.util.mergeOptions(d,c),f=this;f.on("contentupdate",function(){f.trigger("adsready")}),f.preroll={},f.on("readyforpreroll",function(){if(""!==e.src){f.ads.startLinearAdMode(),f.src(e.src),f.one("durationchange",function(){f.play()});var b=document.createElement("a");if(b.className="preroll-blocker",b.href=e.href||"#",b.target=e.target||"_blank",b.onclick=function(){f.trigger("adclick")},f.preroll.blocker=b,f.el().insertBefore(b,f.controlBar.el()),e.allowSkip!==!1){var c=document.createElement("div");c.className="preroll-skip-button",f.preroll.skipButton=c,f.el().appendChild(c),c.onclick=function(b){var c=c||a.Event;return(" "+f.preroll.skipButton.className+" ").indexOf(" enabled ")>=0&&f.preroll.exitPreroll(),void 0===c.prototype.stopPropagation?!1:void b.stopPropagation()}}f.one("ended",f.preroll.exitPreroll),f.on("timeupdate",f.preroll.timeupdate)}}),f.preroll.exitPreroll=function(){f.preroll.skipButton.parentNode.removeChild(f.preroll.skipButton),f.preroll.blocker.parentNode.removeChild(f.preroll.blocker),f.off("timeupdate",f.preroll.timeupdate),f.off("ended",f.preroll.exitPreroll),f.ads.endLinearAdMode()},f.preroll.timeupdate=function(){f.loadingSpinner.el().style.display="none";var a=Math.ceil(e.skipTime-f.currentTime());a>0?f.preroll.skipButton.innerHTML="Skip in "+a+"...":-1===(" "+f.preroll.skipButton.className+" ").indexOf(" enabled ")&&(f.preroll.skipButton.className+=" enabled",f.preroll.skipButton.innerHTML="Skip")}},b.plugin("preroll",c)}(window,window.videojs);